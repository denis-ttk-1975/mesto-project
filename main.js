(()=>{"use strict";var e=function(e,t,n){var r=e.querySelector(".".concat(t.name,"-error"));t.classList.remove(n.inputErrorClass),r.classList.remove(n.errorClass),r.textContent=""},t=function(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove(n.inactiveButtonClass),t.removeAttribute("disabled")):(t.classList.add(n.inactiveButtonClass),t.setAttribute("disabled",!0))},n=document.querySelector(".profile__member-name"),r=document.querySelector(".profile__lower-text"),o=document.querySelector(".popup-profile-input"),u=o.querySelector(".popup__userdata-input"),c=u.querySelector('input[name="full_name"]'),a=u.querySelector('input[name="about"]'),l=o.querySelectorAll(".popup__input-field"),i=o.querySelector('[type = "submit"]'),p=document.querySelector(".popup-new-place"),s=p.querySelector(".popup__userdata-input"),d=s.querySelector('input[name = "place_name"]'),m=s.querySelector('input[name = "picture_link"]'),v=p.querySelectorAll(".popup__input-field"),f=p.querySelector('[type = "submit"]'),_=document.querySelector(".popup-big-picture"),y=_.querySelector(".popup__picture"),S=_.querySelector(".popup__picture-figcaption");function q(e){e.classList.add("popup_opened"),document.addEventListener("keydown",C)}function k(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",C)}function b(){k(o)}function L(){k(p)}function E(){k(_)}function g(e,t,n){var r=e.target;r.closest(".popup__container")||r.closest(".popup__btn-save")||r.closest(".popup__btn-close")||r.closest(".popup__figure-container")?e.stopPropagation():n(t)}function C(e){"Escape"===e.key&&k(document.querySelector(".popup_opened"))}var x=document.querySelector(".elements"),h=document.querySelector("#card-template").content;function A(e,t){var n=h.querySelector(".element").cloneNode(!0),r=n.querySelector(".element__mask");return r.src=e,r.alt=t,n.querySelector(".element__card-name").textContent=t,r.addEventListener("click",(function(e){var t;t=e.target,y.alt=t.alt,y.src=t.src,S.textContent=t.alt,q(_)})),n.querySelector(".element__like-btn").addEventListener("click",(function(e){e.target.classList.toggle("element__like-btn_liked")})),n.querySelector(".element__delete").addEventListener("click",(function(e){e.target.closest(".element").remove()})),n}var w={formSelector:".popup__userdata-input",inputSelector:".popup__input-field",submitButtonSelector:'[type = "submit"]',inactiveButtonClass:"popup__btn-save_inactive",inputErrorClass:"popup__input-field_error",errorClass:"popup__input-error_active"},j=document.querySelector(".profile__edit-button"),B=document.querySelector(".profile__add"),D=document.querySelector('form[name="user-data"]'),z=document.querySelector('form[name="new-place"]'),M=o.querySelector(".popup__btn-close"),N=p.querySelector(".popup__btn-close"),P=_.querySelector(".popup__btn-close");[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t=A(e.link,e.name);x.prepend(t)})),j.addEventListener("click",(function(){return function(u){c.value=n.textContent,a.value=r.textContent,e(o,c,u),e(o,a,u),t(Array.from(l),i,u),q(o)}(w)})),M.addEventListener("click",b),D.addEventListener("submit",(function(e){e.preventDefault(),n.textContent=c.value,r.textContent=a.value,k(o)})),o.addEventListener("mousedown",(function(e){return g(e,o,b)})),B.addEventListener("click",(function(){return function(n){e(p,d,n),e(p,m,n),d.value="",m.value="",t(Array.from(v),f,n),q(p)}(w)})),N.addEventListener("click",L),z.addEventListener("submit",(function(e){e.preventDefault();var t=A(m.value,d.value);x.prepend(t),d.value="",m.value="",k(p)})),p.addEventListener("mousedown",(function(e){return g(e,p,L)})),P.addEventListener("click",E),_.addEventListener("mousedown",(function(e){return g(e,_,E)})),function(n){Array.from(document.querySelectorAll(n.formSelector)).forEach((function(r){r.addEventListener("submit",(function(e){e.preventDefault()})),function(n,r){var o=Array.from(n.querySelectorAll(r.inputSelector)),u=n.querySelector(r.submitButtonSelector);t(o,u,r),o.forEach((function(c){c.addEventListener("input",(function(){!function(t,n,r){n.validity.valid?e(t,n,r):function(e,t,n,r){var o=e.querySelector(".".concat(t.name,"-error"));t.classList.add(r.inputErrorClass),o.textContent=n,o.classList.add(r.errorClass)}(t,n,n.validationMessage,r)}(n,c,r),t(o,u,r)}))}))}(r,n)}))}(w)})();